<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Data / Query example - JS View CODA</title>
    <link rel="stylesheet" href="css/screen.css">
  </head>
  <body>

    <section class="container-fluid">
      <header class="row">
        <div class="col-md-offset-2 col-md-8 text-center">
          <h2 data-localize="global.indicators">Indicator query</h2>
        </div>
      </header>
      <div class="row metadata">
        <div class="col-md-offset-2 col-md-8 text-center h2">
          <a><span name="indicator"></span></a>
          <span name="year" class="h3"></span>
        </div>
        <div class="col-md-offset-2 col-md-8 text-center h3">
          <a><span name="dataset"></span></a> -
          <a><span name="source"></span></a>
        </div>
        <div class="col-md-offset-2 col-md-8 text-center">
          <p><span name="description"></span></p>
        </div>
      </div>
      <div class="row text-center">
        <div class="col-md-offset-2 col-md-8 text-center">
          <form class="form-inline">
            <span class="h3">
              <span class="glyphicon glyphicon-download-alt"></span> Download the data
            </span>
            <!--   </div> -->
            <!-- <div class="col-xs-12"> -->
            <div class="form-group">
              <select name="year" class="form-control" disabled="disabled">
                <option data-localize="inputs.years">Year...</option>
              </select>
            </div>
            <div class="form-group">
              <div class="checkbox">
                <label>(
                  <input type="checkbox" name="all" value="all">
                  All years)
                </label>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="row text-center h3">
        <div class="col-sm-2"><a class="btn btn-default">CVS</label></a></div>
        <div class="col-sm-2"><a class="btn btn-default">JSON</label></a></div>
        <div class="col-sm-2"><a class="btn btn-default">XML</label></a></div>
        <div class="col-sm-2"><a class="btn btn-default">EXCEL</label></a></div>
        <div class="col-sm-2"><a class="btn btn-default">HTML</label></a></div>
        <div class="col-sm-2"><a class="btn btn-default">RDFa</label></a></div>
      </div>
    </section>
    
    <script src="js/vendor/jquery-1.11.2.min.js"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/vendor/highstock.js"></script>
    <script src="js/vendor/highcharts-more.js"></script>
    <script src="js/lbvis.data.js"></script>
    <script src="js/lbvis.js"></script>
    <script type="text/javascript">
      LBV = new lbvis();
      var defaultParams = {
        vis: LBV,
        indicator: "WB-SP.RUR.TOTL.ZS"
      };
      LBV.ready().done(function () {
      console.log(LBV.cache());
        LBV.getIndicatorDetails(defaultParams.indicator).done(function () {
      LBV.setMetadata('.metadata span', defaultParams.indicator);
      $('input[name="year"]').attr('disabled', false);
      $('input[name="year"]').html(LBV.generateOptions(LBV.cache('year')[defaultParams.indicator]));
      });
      });
    </script>
  </body>
</html>
